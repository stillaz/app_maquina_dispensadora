<ion-header>
  <ion-toolbar>
    <ion-title>Datos de Producto</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cerrar()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card *ngIf="formulario">
    <form [formGroup]="formulario">
      <ion-list>
        <ion-item>
          <ion-label color="primary" position="floating">Id</ion-label>
          <ion-input type="text" formControlName="id" [disabled]="id"></ion-input>
        </ion-item>

        <ion-item color="danger" *ngIf="formulario.controls.id.errors.required && formulario.controls.id.touched">
          <p>El código del producto no es válido</p>
        </ion-item>

        <ion-item color="danger" *ngIf="formulario.controls.id.errors.valorUnico">
          <p>El código ingresado ya existe</p>
        </ion-item>

        <ion-item>
          <ion-label color="primary" position="floating">Nombre</ion-label>
          <ion-input type="text" formControlName="nombre"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label color="primary" position="floating">Precio</ion-label>
          <ion-input type="number" formControlName="precio"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label color="primary" position="floating">Cantidad</ion-label>
          <ion-input type="number" formControlName="cantidad"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label color="primary" position="floating">Activo</ion-label>
          <ion-checkbox color="medium" formControlName="activo" [checked]="formulario.controls.activo.value" mode="md"
            position="floating"></ion-checkbox>
        </ion-item>

        <ion-item>
          <ion-label color="primary" position="floating">Alerta</ion-label>
          <ion-input type="number" formControlName="alerta"></ion-input>
        </ion-item>

        <ion-card style="height: 300px;">
          <img *ngIf="formulario.controls.imagen.value" [src]="formulario.controls.imagen.value"
            style="max-width:300px;" />
          <ion-note color="medium" *ngIf="!formulario.controls.imagen.value">Sin imagen</ion-note>

          <ion-fab horizontal="center" vertical="bottom">
            <ion-fab-button [color]="" size="small" (click)="imagen()">
              <ion-icon name="image"></ion-icon>
            </ion-fab-button>
          </ion-fab>
        </ion-card>
      </ion-list>
    </form>
  </ion-card>
</ion-content>
<ion-footer>
  <ion-toolbar>
    <ion-buttons slot="end">
      <ion-button>

      </ion-button>

      <ion-button color="danger" (click)="eliminar()" *ngIf="id">
        Eliminar
        <ion-icon name="trash" slot="start"></ion-icon>
      </ion-button>

      <ion-button color="success" [disabled]="formulario.invalid" *ngIf="formulario" (click)="guardar()">
        Guardar
        <ion-icon name="save" slot="start"></ion-icon>
      </ion-button>

      <ion-button color="danger" (click)="cerrar()">
        Cancelar
        <ion-icon name="close" slot="start"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>